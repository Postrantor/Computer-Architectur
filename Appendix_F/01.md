## Introduction

Previous chapters and appendices cover the components of a single computer but give little consideration to the interconnection of those components and how mul- tiple computer systems are interconnected. These aspects of computer architecture have gained significant importance in recent years. In this appendix we see how to connect individual devices together into a community of communicating devices, where the term `device` is generically used to signify anything from a component or set of components within a computer to a single computer to a system of com- puters. [Figure F.1](#_bookmark597) shows the various elements comprising this community: end nodes consisting of devices and their associated hardware and software interfaces, links from end nodes to the interconnection network, and the interconnection net- work. Interconnection networks are also called `networks, communication subnets`, or `communication subsystems`. The interconnection of multiple networks is called `internetworking.` This relies on communication standards to convert information from one kind of network to another, such as with the Internet.

> 前面的章节和附录涵盖了单台计算机的组件，但很少考虑这些组件的互连以及**多台计算机系统如何互连**。近年来，计算机体系结构的这些方面变得非常重要。在本附录中，我们将看到如何将单个设备连接在一起形成一个通信设备社区，其中术语 "设备" 通常用于表示从计算机内的一个组件或一组组件到单台计算机再到计算机系统的任何事物。推杆。[图 F.1](#_bookmark597) 显示了构成该社区的各种元素：由设备及其相关硬件和软件接口组成的端节点、从端节点到互连网络的链路以及互连网络。互连网络也称为 "网络、通信子网" 或 "通信子系统" 。多个网络的互连称为 "互联网络" 。这依赖于通信标准将信息从一种网络转换为另一种网络，例如通过互联网。

There are several reasons why computer architects should devote attention to interconnection networks. In addition to providing external connectivity, networks are commonly used to interconnect the components within a single computer at many levels, including the processor microarchitecture. Networks have long been used in mainframes, but today such designs can be found in personal computers as well, given the high demand on communication bandwidth needed to enable increased computing power and storage capacity. Switched networks are replacing buses as the normal means of communication between computers, between I/O devices, between boards, between chips, and even between modules inside chips. Computer architects must understand interconnect problems and solutions in order to more effectively design and evaluate computer systems.

> 计算机架构师应该关注互连网络有几个原因。除了提供外部连接之外，网络通常用于在多个级别互连单个计算机内的组件，包括处理器微体系结构。网络长期以来一直用于大型机，但如今这种设计也可以在个人计算机中找到，因为对通信带宽的高要求需要提高计算能力和存储容量。交换网络正在取代总线，成为计算机之间、I/O 设备之间、电路板之间、芯片之间，甚至芯片内部模块之间的正常通信方式。计算机架构师必须了解互连问题和解决方案，以便更有效地设计和评估计算机系统。

Interconnection networks cover a wide range of application domains, very much like memory hierarchy covers a wide range of speeds and sizes. Networks implemented within processor chips and systems tend to share characteristics much in common with processors and memory, relying more on high-speed hard- ware solutions and less on a flexible software stack. Networks implemented across systems tend to share much in common with storage and I/O, relying more on the operating system and software protocols than high-speed hardware—though we are seeing a convergence these days. Across the domains, performance includes latency and effective bandwidth, and queuing theory is a valuable analytical tool in evaluating performance, along with simulation techniques.

> 互连网络涵盖了广泛的应用程序域，就像内存层次结构涵盖了广泛的速度和尺寸。在处理器芯片和系统中实施的网络倾向于共享与处理器和内存的共同点，更多地依赖于高速硬件解决方案，而较少依靠灵活的软件堆栈。跨系统实施的网络倾向于与存储和 I/O 共享，而与高速硬件相比，更多地依赖于操作系统和软件协议，尽管如今我们看到了收敛性。在整个领域，性能包括延迟和有效的带宽，排队理论是评估性能的宝贵分析工具，以及仿真技术。

This topic is vast—portions of [Figure F.1](#_bookmark597) are the subject of entire books and college courses. The goal of this appendix is to provide for the computer architect an overview of network problems and solutions. This appendix gives introductory explanations of key concepts and ideas, presents architectural implications of inter- connection network technology and techniques, and provides useful references to more detailed descriptions. It also gives a common framework for evaluating all types of interconnection networks, using a single set of terms to describe the basic alternatives. As we will see, many types of networks have common preferred alter- natives, but for others the best solutions are quite different. These differences become very apparent when crossing between the networking domains.

> 这个主题是广泛的 - [图 F.1](#_bookmark597) 的部分是整本书和大学课程的主题。本附录的目的是为计算机架构师**提供网络问题和解决方案**的概述。该附录给出了关键概念和思想的介绍性解释，介绍了间断网络技术和技术的架构含义，并为更详细的描述提供了有用的参考。它还提供了一个共同的框架，用于评估所有类型的互连网络，并使用一组术语来描述基本替代方案。正如我们将看到的那样，许多类型的网络都具有共同的首选替代方案，但对于其他网络，最佳解决方案却大不相同。当网络域之间跨越时，这些差异变得非常明显。

Figure F.1 A conceptual illustration of an interconnected community of devices.

### Interconnection Network Domains

Interconnection networks are designed for use at different levels within and across computer systems to meet the operational demands of various application areas— high-performance computing, storage I/O, cluster/workgroup/enterprise systems, internetworking, and so on. Depending on the number of devices to be connected and their proximity, we can group interconnection networks into four major net- working domains:

> 互连网络设计用于计算机系统内和跨计算机系统的不同级别，以满足各种应用领域的操作需求——高性能计算、存储 I/O、集群/工作组/企业系统、网络互联等。根据要连接的设备数量及其距离，我们可以将互连网络分为四个主要网络域：

- `On-chip networks` (OCNs)—Also referred to as network-on-chip (NoC), this type of network is used for interconnecting microarchitecture functional units, register files, caches, compute tiles, and processor and IP cores within chips or multichip modules. Current and near future OCNs support the connection of a few tens to a few hundred of such devices with a maximum interconnection distance on the order of centimeters. Most OCNs used in high-performance chips are custom designed to mitigate chip-crossing wire delay problems caused by increased technology scaling and transistor integration, though some proprietary designs are gaining wider use (e.g., IBM’s CoreConnect, ARM’s AMBA, and Sonic’s Smart Interconnect). Examples of current OCNs are those found in the Intel Teraflops processor chip [Hoskote07], connecting 80 simple cores; the Intel Single-Chip Cloud Computer (SCCC) [Howard10], connecting 48 IA-32 architecture cores; and Tilera’s TILE-Gx line of processors [TILE- GX], connecting 100 processing cores in 4Q 2011 using TSMC’s 40 nanome- ter process and 200 cores planned for 2013 (code named "Stratton" ) using TSMC’s 28 nanometer process. The networks peak at 256 GBps for both Intel prototypes and up to 200 Tbps for the TILE-Gx100 processor. More detailed information for OCNs is provided in [Flich [2010]](#_bookmark655).

> - "片上网络" (OCN)——也称为片上网络 (NoC)，这种类型的网络用于互连微架构功能单元、寄存器文件、缓存、计算块以及处理器和 IP 内核 芯片或多芯片模块。当前和不久的将来 OCN 支持连接几十到几百个这样的设备，最大互连距离为厘米量级。高性能芯片中使用的大多数 OCN 都是定制设计，以减轻因技术扩展和晶体管集成度增加而导致的芯片交叉线延迟问题，尽管一些专有设计正在获得更广泛的使用(例如，IBM 的 CoreConnect、ARM 的 AMBA 和 Sonic 的智能互连) . 当前 OCN 的示例是在英特尔 Teraflops 处理器芯片 [Hoskote07] 中发现的那些，连接 80 个简单内核；英特尔单芯片云计算机(SCCC)[Howard10]，连接 48 个 IA-32 架构内核；Tilera 的 TILE-Gx 系列处理器 [TILE-GX]，在 2011 年第四季度使用台积电的 40 纳米工艺连接 100 个处理内核，并计划在 2013 年使用台积电的 28 纳米工艺连接 200 个内核(代号 "Stratton" )。英特尔原型的网络峰值为 256 GBps，TILE-Gx100 处理器的网络峰值为 200 Tbps。[Flich [2010]](#_bookmark655) 中提供了有关 OCN 的更多详细信息。

- `System/storage area networks` (SANs)—This type of network is used for inter- processor and processor-memory interconnections within multiprocessor and multicomputer systems, and also for the connection of storage and I/O compo- nents within server and data center environments. Typically, several hundreds of such devices can be connected, although some supercomputer SANs support the interconnection of many thousands of devices, like the IBM Blue Gene/L supercomputer. The maximum interconnection distance covers a relatively small area—on the order of a few tens of meters usually—but some SANs have distances spanning a few hundred meters. For example, `InfiniBand`, a popular SAN standard introduced in late 2000, supports system and storage I/O inter- connects at up to 120 Gbps over a distance of 300 m.

> - `SYSTEM/Storage Area Networks`(SANS) - 这种类型的网络用于多处理器和多电脑系统内的处理器和处理器 - 内存互连，以及存储的连接以及服务器和数据中心内的 I/O 组合环境。通常，尽管某些超级计算机没有支持数千个设备的互连，例如 IBM 蓝色基因/L 超级计算机，但通常可以连接几百个此类设备。最大互连距离覆盖了一个相对较小的区域(通常是几十米的订单)，但有些 sans 的距离跨越了几百米。例如，*Infiniband* 是 2000 年底引入的流行 SAN 标准，支持系统和存储 I/O 之间的连接至 120 Gbps，距离为 300 m。

- `Local area networks` (LANs)—This type of network is used for intercon- necting autonomous computer systems distributed across a machine room or throughout a building or campus environment. Interconnecting PCs in a cluster is a prime example. Originally, LANs connected only up to a hun- dred devices, but with bridging LANs can now connect up to a few thou- sand devices. The maximum interconnect distance covers an area of a few kilometers usually, but some have distance spans of a few tens of kilome- ters. For instance, the most popular and enduring LAN, `Ethernet`, has a 10 Gbps standard version that supports maximum performance over a distance of 40 km.

> - `local 区域网络`(LANS) - 这种网络类型用于互连分布在机床或整个建筑物或校园环境中的自动计算机系统。群集中的 PC 互连是一个很好的示例。最初，LAN 仅连接到一个设备上，但是桥梁现在可以连接到几个设备。最大互连距离通常覆盖几公里的面积，但有些距离有几十公里的距离。例如，最受欢迎和持久的 LAN `Ethernet` 具有 10 Gbps 标准版本，可在 40 公里的距离内支持最大性能。

- `Wide area networks` (WANs)—Also called `long-haul networks`, WANs con- nect computer systems distributed across the globe, which requires internet- working support. WANs connect many millions of computers over distance scales of many thousands of kilometers. Asynchronous Transfer Mode (ATM) is an example of a WAN.

> - ` WIDE AREVICE NETWORKS`(WANS) - 也称为 *long-haul Networks*，WANS 连接在全球范围内分布的计算机系统，这需要 Internet 工作支持。WAN 将数百万计算机连接到数千公里的距离尺度上。异步传输模式(ATM)是 WAN 的一个示例。

[Figure F.2](#_bookmark598) roughly shows the relationship of these networking domains in terms of the number of devices interconnected and their distance scales. Overlap exists for some of these networks in one or both dimensions, which leads to product competition. Some network solutions have become commercial stan- dards while others remain proprietary. Although the preferred solutions may sig- nificantly differ from one interconnection network domain to another depending on the design requirements, the problems and concepts used to address network problems remain remarkably similar across the domains. No matter the target domain, networks should be designed so as not to be the bottleneck to system performance and cost efficiency. Hence, the ultimate goal of computer architects is to design interconnection networks of the lowest possible cost that are capable of transferring the maximum amount of available information in the shortest possible time.

> [图 F.2](#_bookmark598) 大致显示了这些网络域的关系，以互连的设备数量及其距离尺度。其中一些网络在一个或两个方面存在重叠，这导致了产品竞争。一些网络解决方案已成为商业标准，而另一些网络解决方案仍然是专有的。尽管首选解决方案可能会明显不同于一个互连网络域而不是设计要求，但用于解决网络问题的问题和概念在整个域之间仍然非常相似。无论目标域如何，都应设计网络，以免成为系统性能和成本效率的瓶颈。因此，计算机架构师的最终目标是设计最低成本的互连网络，这些网络能够在最短的时间内传输最大可用信息。

Figure F.2 Relationship of the four interconnection network domains in terms of number of devices connected and their distance scales: on-chip network (OCN), sys- tem/storage area network (SAN), local area network (LAN), and wide area network (WAN). Note that there are overlapping ranges where some of these networks compete. Some supercomputer systems use proprietary custom networks to intercon- nect several thousands of computers, while other systems, such as multicomputer clus- ters, use standard commercial networks.

> 图 F.2 与连接的设备数量及其距离尺度有关的四个互连网络域的关系：芯片网络(OCN)，系统/存储区域网络(SAN)，局域网(LAN)和广域网络(WAN)。请注意，其中一些网络竞争的重叠范围。一些超级计算机系统使用专有的自定义网络来互连数千台计算机，而其他系统(例如多计算机库)使用标准的商业网络。

### Approach and Organization of This Appendix

Interconnection networks can be well understood by taking a top-down approach to unveiling the concepts and complexities involved in designing them. We do this by viewing the network initially as an opaque "black box" that simply and ideally performs certain necessary functions. Then we systematically open various layers of the black box, allowing more complex concepts and nonideal network behavior to be revealed. We begin this discussion by first considering the interconnection of just two devices in [Section F.2](#interconnecting-two-devices), where the black box network can be viewed as a simple `dedicated link` network—that is, wires or collections of wires running bidi- rectionally between the devices. We then consider the interconnection of more than two devices in [Section F.3](#connecting-more-than-two-devices), where the black box network can be viewed as a `shared link` network or as a `switched point-to-point` network connecting the devices. We continue to peel away various other layers of the black box by considering in more detail the network topology ([Section F.4](#network-topology)); routing, arbitration, and switching ([Section F.5](#network-routing-arbitration-and-switching)); and switch microarchitecture ([Section F.6](#switch-microarchitecture)). Practical issues for com- mercial networks are considered in [Section F.7](#practical-issues-for-commercial-interconnection-networks), followed by examples illustrating the trade-offs for each type of network in [Section F.8](#examples-of-interconnection-networks). Internetworking is briefly discussed in [Section F.9](#internetworking), and additional crosscutting issues for interconnection net- works are presented in [Section F.10](#crosscutting-issues-for-interconnection-networks). [Section F.11](#_bookmark638) gives some common fallacies and pitfalls related to interconnection networks, and [Section F.12](#concluding-remarks-11) presents some concluding remarks. Finally, we provide a brief historical perspective and some suggested reading in Section F.13.

> 通过采用自上而下的方法来揭示设计它们所涉及的概念和复杂性，可以很好地理解互连网络。为此，我们首先将网络视为一个不透明的 "黑匣子" ，它可以简单而理想地执行某些必要的功能。然后我们系统地打开黑匣子的各个层次，让更复杂的概念和不理想的网络行为得以揭示。我们首先考虑[第 F.2 节](#interconnecting-two-devices) 中两个设备的互连，开始讨论，其中黑盒网络可以看作是一个简单的 "专用链路" 网络，即电线 或在设备之间双向运行的电线集合。然后，我们在 [Section F.3](#connecting-more-than-two-devices) 中考虑两个以上设备的互连，其中黑盒网络可以被视为 "共享链路" 网络或 "交换"  连接设备的点对点网络。我们通过更详细地考虑网络拓扑([第 F.4 节](#network-topology))继续剥离黑盒的其他各个层；路由、仲裁和交换([第 F.5 节](#network-routing-arbitration-and-switching))；和开关微架构([Section F.6](#switch-microarchitecture))。[Section F.7](#practical-issues-for-commercial-interconnection-networks) 考虑了商业网络的实际问题，随后在 [Section F.8] 中举例说明了每种网络的权衡 ](#examples-of-interconnection-networks)。[Section F.9](#internetworking) 中简要讨论了互联网络，[Section F.10](#crosscutting-issues-for-interconnection-networks) 中介绍了互连网络的其他横切问题。[Section F.11](#_bookmark638) 给出了一些与互连网络相关的常见谬误和陷阱，[Section F.12](#concluding-remarks-11) 给出了一些结束语。最后，我们在第 F.13 节中提供了一个简短的历史视角和一些建议阅读。
