## Introduction

> ＃＃ 介绍

Previous chapters and appendices cover the components of a single computer but give little consideration to the interconnection of those components and how mul- tiple computer systems are interconnected. These aspects of computer architecture have gained significant importance in recent years. In this appendix we see how to connect individual devices together into a community of communicating devices, where the term _device_ is generically used to signify anything from a component or set of components within a computer to a single computer to a system of com- puters. [Figure F.1](#_bookmark597) shows the various elements comprising this community: end nodes consisting of devices and their associated hardware and software interfaces, links from end nodes to the interconnection network, and the interconnection net- work. Interconnection networks are also called _networks, communication subnets_, or _communication subsystems_. The interconnection of multiple networks is called _internetworking._ This relies on communication standards to convert information from one kind of network to another, such as with the Internet.

> 先前的章节和附录涵盖了一台计算机的组件，但很少考虑这些组件的互连以及如何将计算机系统互连。近年来，计算机架构的这些方面已变得非常重要。在本附录中，我们看到了如何将单个设备连接到通信设备社区中，其中术语_device_通常用于表示从计算机中的组件或组件或单个计算机到单个计算机到计算机系统的任何内容。[图 F.1](#_ bookmark597)显示了包含此社区的各种元素：由设备及其关联的硬件和软件接口组成的结束节点，从结束节点到互连网络以及互连网络的链接。互连网络也称为_NETWORKS，通信子网或_ Communication Subsystems_。多个网络的互连称为_internetworking。

There are several reasons why computer architects should devote attention to interconnection networks. In addition to providing external connectivity, networks are commonly used to interconnect the components within a single computer at many levels, including the processor microarchitecture. Networks have long been used in mainframes, but today such designs can be found in personal computers as well, given the high demand on communication bandwidth needed to enable increased computing power and storage capacity. Switched networks are replacing buses as the normal means of communication between computers, between I/O devices, between boards, between chips, and even between modules inside chips. Computer architects must understand interconnect problems and solutions in order to more effectively design and evaluate computer systems.

> 计算机架构师应注意互连网络的原因有很多。除了提供外部连接外，网络还通常用于在许多级别(包括处理器微结构)的单个计算机中互连组件。大型机长期以来一直在使用网络，但是如今，由于对启用增加计算能力和存储容量所需的通信带宽需求，因此也可以在个人计算机中找到这样的设计。交换网络正在替换总线作为计算机之间的正常通信手段，I/O 设备之间，木板之间，芯片之间甚至模块之间的模块之间的通信。计算机架构师必须了解互连问题和解决方案，以便更有效地设计和评估计算机系统。

Interconnection networks cover a wide range of application domains, very much like memory hierarchy covers a wide range of speeds and sizes. Networks implemented within processor chips and systems tend to share characteristics much in common with processors and memory, relying more on high-speed hard- ware solutions and less on a flexible software stack. Networks implemented across systems tend to share much in common with storage and I/O, relying more on the operating system and software protocols than high-speed hardware—though we are seeing a convergence these days. Across the domains, performance includes latency and effective bandwidth, and queuing theory is a valuable analytical tool in evaluating performance, along with simulation techniques.

> 互连网络涵盖了广泛的应用程序域，就像内存层次结构涵盖了广泛的速度和尺寸。在处理器芯片和系统中实施的网络倾向于共享与处理器和内存的共同点，更多地依赖于高速硬件解决方案，而较少依靠灵活的软件堆栈。跨系统实施的网络倾向于与存储和 I/O 共享，而与高速硬件相比，更多地依赖于操作系统和软件协议，尽管如今我们看到了收敛性。在整个领域，性能包括延迟和有效的带宽，排队理论是评估性能的宝贵分析工具，以及仿真技术。

This topic is vast—portions of [Figure F.1](#_bookmark597) are the subject of entire books and college courses. The goal of this appendix is to provide for the computer architect an overview of network problems and solutions. This appendix gives introductory explanations of key concepts and ideas, presents architectural implications of inter- connection network technology and techniques, and provides useful references to more detailed descriptions. It also gives a common framework for evaluating all types of interconnection networks, using a single set of terms to describe the basic alternatives. As we will see, many types of networks have common preferred alter- natives, but for others the best solutions are quite different. These differences become very apparent when crossing between the networking domains.

> 这个主题是广泛的 -  [图 F.1](#_ bookmark597)的部分是整本书和大学课程的主题。本附录的目的是为计算机架构师提供网络问题和解决方案的概述。该附录给出了关键概念和思想的介绍性解释，介绍了间断网络技术和技术的架构含义，并为更详细的描述提供了有用的参考。它还提供了一个共同的框架，用于评估所有类型的互连网络，并使用一组术语来描述基本替代方案。正如我们将看到的那样，许多类型的网络都具有共同的首选替代方案，但对于其他网络，最佳解决方案却大不相同。当网络域之间跨越时，这些差异变得非常明显。

Figure F.1 A conceptual illustration of an interconnected community of devices.

> 图 F.1 互连设备社区的概念说明。

### Interconnection Network Domains

> ###互连网络域

Interconnection networks are designed for use at different levels within and across computer systems to meet the operational demands of various application areas— high-performance computing, storage I/O, cluster/workgroup/enterprise systems, internetworking, and so on. Depending on the number of devices to be connected and their proximity, we can group interconnection networks into four major net- working domains:

> 互连网络设计用于在计算机系统内部和跨计算机系统内的不同级别使用，以满足各种应用领域的运营需求 - 高性能计算，存储 I/O，群集/工作组/企业系统，InternetWorking 等。根据要连接的设备数量及其接近度，我们可以将互连网络分组为四个主要的净工作域：

- _On-chip networks_ (OCNs)—Also referred to as network-on-chip (NoC), this type of network is used for interconnecting microarchitecture functional units, register files, caches, compute tiles, and processor and IP cores within chips or multichip modules. Current and near future OCNs support the connection of a few tens to a few hundred of such devices with a maximum interconnection distance on the order of centimeters. Most OCNs used in high-performance chips are custom designed to mitigate chip-crossing wire delay problems caused by increased technology scaling and transistor integration, though some proprietary designs are gaining wider use (e.g., IBM’s CoreConnect, ARM’s AMBA, and Sonic’s Smart Interconnect). Examples of current OCNs are those found in the Intel Teraflops processor chip \[Hoskote07\], connecting 80 simple cores; the Intel Single-Chip Cloud Computer (SCCC) \[Howard10\], connecting 48 IA-32 architecture cores; and Tilera’s TILE-Gx line of processors \[TILE- GX\], connecting 100 processing cores in 4Q 2011 using TSMC’s 40 nanome- ter process and 200 cores planned for 2013 (code named “Stratton”) using TSMC’s 28 nanometer process. The networks peak at 256 GBps for both Intel prototypes and up to 200 Tbps for the TILE-Gx100 processor. More detailed information for OCNs is provided in [Flich \[2010\]](#_bookmark655).

> - _ON-CHIP Networks_(OCNS) - 也称为网络芯片(NOC)，这种类型的网络用于互连微结构功能单元，寄存器文件，寄存器，计算瓷砖以及芯片或芯片或 IP 内芯片或 IP 多芯片模块。电流和将来的 OCN 支持几十此类设备的连接，这些设备在厘米的顺序上具有最大的互连距离。在高性能芯片中使用的大多数 OCN 都是根据技术缩放和晶体管集成引起的芯片跨线延迟问题的定制，尽管某些专有设计正在获得更广泛的用途(例如，IBM 的 CoreConnect，Arm's Armnect，Arm's Amba 和 Sonic 的智能互连)。当前 OCN 的示例是 Intel Teraflops 处理器芯片\ [Hoskote07 \]中发现的示例，连接了 80 个简单的内核；英特尔单芯片云计算机(SCCC)\ [Howard10 \]，连接 48 IA-32 体系结构；以及 Tilera 的处理器瓷砖系列\ [tile-gx \]，使用 TSMC 的 40 个纳米过程和计划为 2013 年计划的 200 个核心(代码为“ Stratton”)，使用 TSMC 的 28 纳米进程连接了 2011 年 4 季度的 100 个加工核心。该网络在英特尔原型和瓷砖 GX100 处理器的最高为 256 Gbps 和最多 200 TBP 的峰值。[FLICH \ [2010 \]](#_ bookmark655)中提供了有关 OCN 的更多详细信息。

- _System/storage area networks_ (SANs)—This type of network is used for inter- processor and processor-memory interconnections within multiprocessor and multicomputer systems, and also for the connection of storage and I/O compo- nents within server and data center environments. Typically, several hundreds of such devices can be connected, although some supercomputer SANs support the interconnection of many thousands of devices, like the IBM Blue Gene/L supercomputer. The maximum interconnection distance covers a relatively small area—on the order of a few tens of meters usually—but some SANs have distances spanning a few hundred meters. For example, _InfiniBand_, a popular SAN standard introduced in late 2000, supports system and storage I/O inter- connects at up to 120 Gbps over a distance of 300 m.

> - _SYSTEM/Storage Area Networks_(SANS) - 这种类型的网络用于多处理器和多电脑系统内的处理器和处理器 - 内存互连，以及存储的连接以及服务器和数据中心内的 I/O 组合环境。通常，尽管某些超级计算机没有支持数千个设备的互连，例如 IBM 蓝色基因/L 超级计算机，但通常可以连接几百个此类设备。最大互连距离覆盖了一个相对较小的区域(通常是几十米的订单)，但有些 sans 的距离跨越了几百米。例如，_Infiniband_是 2000 年底引入的流行 SAN 标准，支持系统和存储 I/O 之间的连接至 120 Gbps，距离为 300 m。

- _Local area networks_ (LANs)—This type of network is used for intercon- necting autonomous computer systems distributed across a machine room or throughout a building or campus environment. Interconnecting PCs in a cluster is a prime example. Originally, LANs connected only up to a hun- dred devices, but with bridging LANs can now connect up to a few thou- sand devices. The maximum interconnect distance covers an area of a few kilometers usually, but some have distance spans of a few tens of kilome- ters. For instance, the most popular and enduring LAN, _Ethernet_, has a 10 Gbps standard version that supports maximum performance over a distance of 40 km.

> - _local 区域网络_(LANS) - 这种网络类型用于互连分布在机床或整个建筑物或校园环境中的自动计算机系统。群集中的 PC 互连是一个很好的示例。最初，LAN 仅连接到一个设备上，但是桥梁现在可以连接到几个设备。最大互连距离通常覆盖几公里的面积，但有些距离有几十公里的距离。例如，最受欢迎和持久的 LAN _Ethernet_具有 10 Gbps 标准版本，可在 40 公里的距离内支持最大性能。

- _Wide area networks_ (WANs)—Also called _long-haul networks_, WANs con- nect computer systems distributed across the globe, which requires internet- working support. WANs connect many millions of computers over distance scales of many thousands of kilometers. Asynchronous Transfer Mode (ATM) is an example of a WAN.

> - _ WIDE AREVICE NETWORKS_(WANS) - 也称为_long-haul Networks_，WANS 连接在全球范围内分布的计算机系统，这需要 Internet 工作支持。WAN 将数百万计算机连接到数千公里的距离尺度上。异步传输模式(ATM)是 WAN 的一个示例。

[Figure F.2](#_bookmark598) roughly shows the relationship of these networking domains in terms of the number of devices interconnected and their distance scales. Overlap exists for some of these networks in one or both dimensions, which leads to product competition. Some network solutions have become commercial stan- dards while others remain proprietary. Although the preferred solutions may sig- nificantly differ from one interconnection network domain to another depending on the design requirements, the problems and concepts used to address network problems remain remarkably similar across the domains. No matter the target domain, networks should be designed so as not to be the bottleneck to system performance and cost efficiency. Hence, the ultimate goal of computer architects is to design interconnection networks of the lowest possible cost that are capable of transferring the maximum amount of available information in the shortest possible time.

> [图 F.2](#_ bookmark598)大致显示了这些网络域的关系，以互连的设备数量及其距离尺度。其中一些网络在一个或两个方面存在重叠，这导致了产品竞争。一些网络解决方案已成为商业标准，而另一些网络解决方案仍然是专有的。尽管首选解决方案可能会明显不同于一个互连网络域而不是设计要求，但用于解决网络问题的问题和概念在整个域之间仍然非常相似。无论目标域如何，都应设计网络，以免成为系统性能和成本效率的瓶颈。因此，计算机架构师的最终目标是设计最低成本的互连网络，这些网络能够在最短的时间内传输最大可用信息。

Figure F.2 Relationship of the four interconnection network domains in terms of number of devices connected and their distance scales: on-chip network (OCN), sys- tem/storage area network (SAN), local area network (LAN), and wide area network (WAN). Note that there are overlapping ranges where some of these networks compete. Some supercomputer systems use proprietary custom networks to intercon- nect several thousands of computers, while other systems, such as multicomputer clus- ters, use standard commercial networks.

> 图 F.2 与连接的设备数量及其距离尺度有关的四个互连网络域的关系：芯片网络(OCN)，系统/存储区域网络(SAN)，局域网(LAN)和广域网络(WAN)。请注意，其中一些网络竞争的重叠范围。一些超级计算机系统使用专有的自定义网络来互连数千台计算机，而其他系统(例如多计算机库)使用标准的商业网络。

### Approach and Organization of This Appendix

> ###该附录的方法和组织

Interconnection networks can be well understood by taking a top-down approach to unveiling the concepts and complexities involved in designing them. We do this by viewing the network initially as an opaque “black box” that simply and ideally performs certain necessary functions. Then we systematically open various layers of the black box, allowing more complex concepts and nonideal network behavior to be revealed. We begin this discussion by first considering the interconnection of just two devices in [Section F.2](#interconnecting-two-devices), where the black box network can be viewed as a simple _dedicated link_ network—that is, wires or collections of wires running bidi- rectionally between the devices. We then consider the interconnection of more than two devices in [Section F.3](#connecting-more-than-two-devices), where the black box network can be viewed as a _shared link_ network or as a _switched point-to-point_ network connecting the devices. We continue to peel away various other layers of the black box by considering in more detail the network topology ([Section F.4](#network-topology)); routing, arbitration, and switching ([Section F.5](#network-routing-arbitration-and-switching)); and switch microarchitecture ([Section F.6](#switch-microarchitecture)). Practical issues for com- mercial networks are considered in [Section F.7](#practical-issues-for-commercial-interconnection-networks), followed by examples illustrating the trade-offs for each type of network in [Section F.8](#examples-of-interconnection-networks). Internetworking is briefly discussed in [Section F.9](#internetworking), and additional crosscutting issues for interconnection net- works are presented in [Section F.10](#crosscutting-issues-for-interconnection-networks). [Section F.11](#_bookmark638) gives some common fallacies and pitfalls related to interconnection networks, and [Section F.12](#concluding-remarks-11) presents some concluding remarks. Finally, we provide a brief historical perspective and some suggested reading in Section F.13.

> 可以通过采用自上而下的方法来揭示设计它们涉及的概念和复杂性，从而可以很好地理解互连网络。我们通过将网络最初视为不透明的“黑匣子”来做到这一点，该网络简单地且理想地执行了某些必要的功能。然后，我们系统地打开了黑匣子的各个层，从而揭示了更复杂的概念和非理想的网络行为。我们首先考虑[F.2](＃互连两个 devices)中的两个设备的互连开始，我们开始讨论，其中黑匣子网络可以看作是一个简单的_dedication link_网络 - 也就是电线或集合电线在设备之间运行的双线。然后，我们考虑在[F.3](＃连接 More-than-two-devices)中的两个以上设备的互连，其中黑匣子网络可以视为_shared link_网络或_switched 点。-point_网络连接设备。我们继续通过更详细地考虑网络拓扑([F.4](＃Network-Topology))，继续剥离黑匣子的其他各个层。路由，仲裁和切换([[F.5]节(＃网络路由 - 划线和转换));并切换微结构([F.6 节](＃开关 - 密集结构))。在[F.7 节](＃实用 - 商业化 - 交流连接网络)中考虑了商业网络的实际问题，其次是示例，说明了[F.8 节中的每种类型网络的权衡取舍](＃InterConnection-networks 的示例)。在[F.9 节](＃InternetWorking)中简要讨论了 InternetWorking，[F.10]节中介绍了互连网络的其他横切问题(＃crossCutting-inter-for-inter-for-interConnection-networks)。[F.11](#_ bookmark638)给出了一些与互连网络相关的常见谬论和陷阱，[F.12](＃结论 remarkss-11)提出了一些结论性的评论。最后，我们提供了一个简短的历史观点，并在 F.13 节中提供了一些建议的阅读。
