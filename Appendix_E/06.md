## Case Study: Sanyo VPC-SX500 Digital Camera

> ##案例研究：Sanyo VPC-SX500 数码相机

Another very familiar embedded system is a digital camera. Here we consider the Sanyo VPC-SX500. When powered on, the microprocessor of the camera first runs diagnostics on all components and writes any error messages to the liquid crystal display (LCD) on the back of the camera. This camera uses a 1.8-inch low-temperature polysilicon thin-film transistor (TFT) color LCD. When a pho- tographer takes a picture, he first holds the shutter halfway so that the micropro- cessor can take a light reading. The microprocessor then keeps the shutter open to get the necessary light, which is captured by a charge-coupled device (CCD) as red, green, and blue pixels. The CCD is a 1/2-inch, 1360 1024-pixel, progressive-scan chip. The pixels are scanned out row by row; passed through routines for white balance, color, and aliasing correction; and then stored in a 4 MB frame buffer. The next step is to compress the image into a standard format, such as JPEG, and store it in the removable Flash memory. The photographer picks the compression, in this camera called either _fine_ or _normal_, with a com- pression ratio of 10 to 20 times. A 512 MB Flash memory can store at least 1200 fine-quality compressed images or approximately 2000 normal-quality com- pressed images. The microprocessor then updates the LCD display to show that there is room for one less picture.

> 另一个非常熟悉的嵌入式系统是数码相机。在这里，我们考虑 Sanyo VPC-SX500。电动机上电动机时，相机的微处理器首先在所有组件上运行诊断，并将任何错误消息写入相机背面的液晶显示器(LCD)。该相机使用 1.8 英寸的低温多硅胶薄膜晶体管(TFT)颜色 LCD。当 Pho-tographer 拍照时，他首先将快门放置在中途，以便微型专员可以进行轻读。然后，微处理器将快门打开以获取必要的灯，该灯由电荷耦合设备(CCD)捕获为红色，绿色和蓝色像素。CCD 是 1/2 英寸，1360 1024 像素，渐进式扫描芯片。像素被行扫描。通过例程，以实现白平衡，颜色和混叠校正；然后存储在 4 MB 框架缓冲区中。下一步是将图像压缩为标准格式，例如 JPEG，并将其存储在可移动的闪存中。摄影师在此相机中选择压缩，称为_fine_或_normal_，压缩比为 10 到 20 次。512 MB 闪存可以至少存储 1200 个高质量的压缩图像或大约 2000 个正常质量的图像。然后，微处理器更新 LCD 显示屏，以表明有一幅较少图片的空间。

Although the previous paragraph covers the basics of a digital camera, there are many more features that are included: showing the recorded images on the color LCD display, sleep mode to save battery life, monitoring battery energy, buffering to allow recording a rapid sequence of uncompressed images, and, in this camera, video recording using MPEG format and audio recording using WAV format.

> 尽管上一段涵盖了数码相机的基础知识，但还有更多功能：在颜色 LCD 显示屏上显示录制的图像，睡眠模式以节省电池寿命，监视电池能量，缓冲以录制快速序列未压缩的图像，以及在此相机中，使用 MPEG 格式和音频录制的视频录制，并使用 WAV 格式进行录制。

The electronic brain of this camera is an embedded computer with several special functions embedded on the chip \[Okada et al. 1999\]. [Figure E.13](#_bookmark588) shows the block diagram of a chip similar to the one in the camera. As mentioned in Section E.1, such chips have been called _systems on a chip_ (SOCs) because they essentially integrate into a single chip all the parts that were found on a small printed circuit board of the past. A SOC generally reduces size and lowers power compared to less integrated solutions. Sanyo claims their SOC enables the camera to operate on half the number of batteries and to offer a smaller form factor than competitors’ cameras. For higher performance, it has two buses. The 16-bit bus is for the many slower I/O devices: SmartMedia interface, program and data memory, and DMA. The 32-bit bus is for the SDRAM, the signal processor (which is connected to the CCD), the Motion JPEG encoder, and the NTSC/PAL encoder (which is connected to the LCD). Unlike desktop microprocessors, note the large variety of I/O buses that this chip must integrate. The 32-bit RISC MPU is a proprietary design and runs at 28.8 MHz, the same clock rate as the buses. This 700 mW chip contains 1.8M transistors in a 10.5 10.5 mm die implemented using a 0.35-micron process.

> 该相机的电子大脑是一台嵌入式计算机，具有嵌入在芯片上的几个特殊功能[Okada 等。1999 \]。[图 E.13](#_ bookmark588)显示了类似于相机中的芯片的框图。如 E.1 节所述，此类芯片在芯片(SOCS)上被称为_systems，因为它们本质上将其集成到过去的小型印刷电路板上的所有零件中。与集成解决方案相比，SOC 通常会降低尺寸和降低功率。Sanyo 声称他们的 SOC 使摄像头能够在电池数量的一半上操作，并提供比竞争对手相机更小的外形。为了提高性能，它有两辆公共汽车。16 位总线适用于许多较慢的 I/O 设备：SmartMedia 接口，程序和数据存储器以及 DMA。32 位总线适用于 SDRAM，信号处理器(连接到 CCD)，运动 JPEG 编码器和 NTSC/PAL 编码器(连接到 LCD)。与桌面微处理器不同，请注意此芯片必须集成的大量 I/O 公交车。32 位 RISC MPU 是专有设计，以 28.8 MHz 运行，与公交车相同。这个 700 MW 芯片在使用 0.35 微米工艺实施的 10.5 毫米模具中包含 1.80 万晶体管。

Figure E.13 The system on a chip (SOC) found in Sanyo digital cameras. This block diagram, found in Okada et al. \[1999\], is for the predecessor of the SOC in the camera described in the text. The successor SOC, called _Super Advanced IC_, uses three buses instead of two, operates at 60 MHz, consumes 800 mW, and fits 3.1M transistors in a 10.2

> 图 E.13 在 Sanyo 数码相机中发现的芯片(SOC)上的系统。该框图，在 Okada 等人中发现。\ [1999 \]，是针对文本中描述的相机中 SOC 的前身。后继 SOC 称为_super Advanced IC_，使用三辆公共汽车而不是两辆公共汽车，以 60 MHz 运行，消耗 800 MW，并在 10.2 中适合 310 万晶体管

10.2 mm die using a 0.35-micron process. Note that this embedded system has twice as many transistors as the state-of-the-art, high-performance microprocessor in 1990! The SOC in the figure is limited to processing 1024 × 768 pixels, but its successor supports 1360 × 1024 pixels.

> 10.2 毫米使用 0.35 微米过程。请注意，该嵌入式系统的晶体管是 1990 年最先进的高性能微处理器的两倍！该图中的 SOC 仅限于处理 1024×768 像素，但其后继者支持 1360×1024 像素。
