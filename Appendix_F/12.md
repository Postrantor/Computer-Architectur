## Historical Perspective and References

> ##历史观点和参考

This appendix has taken the perspective that interconnection networks for very different domains—from on-chip networks within a processor chip to wide area networks connecting computers across the globe—share many of the same concerns. With this, interconnection network concepts are presented in a uni- fied way, irrespective of their application; however, their histories are vastly different, as evidenced by the different solutions adopted to address similar problems. The lack of significant interaction between research communities from the different domains certainly contributed to the diversity of implemented solutions. Highlighted below are relevant readings on each topic. In addi- tion, good general texts featuring WAN and LAN networking have been written by [Davie, Peterson, and Clark [1999]](#_bookmark652) and by [Kurose and Ross](#_bookmark663) [[2001]](#_bookmark663). Good texts focused on SANs for multiprocessors and clusters have been written by [Duato, Yalamanchili, and Ni [2003]](#_bookmark654) and by [Dally and](#_bookmark651) [Towles [2004]](#_bookmark651). An informative chapter devoted to dead-lock resolution in interconnection networks was written by [Pinkston [2004]](#_bookmark668). Finally, an edited work by [Jantsch and Tenhunen [2003]](#_bookmark660) on OCNs for multicore processors and system-on-chips is also interesting reading.

> 该附录具有这样的观点，即互连网络与非常不同的域(从处理器芯片中的芯片网络到连接全球计算机的广域网络)都表现出许多相同的问题。这样，互连网络概念以一种单一的方式提出，而不论其应用如何；但是，它们的历史大不相同，这是通过用于解决类似问题的不同解决方案所证明的。来自不同领域的研究社区之间缺乏重大互动，无疑促进了实施解决方案的多样性。下面突出显示了每个主题的相关读数。](#\_bookmark666)。[Duato，Yalamanchili 和 Ni \ [2003 ]](#_bookmark654)和 [dally and](#_bookmark651)[towles \ [2004 ](＃](＃](＃](＃](＃bookmark654)，\_Bookmark651)。[Pinkston \ [2004 ]](#_bookmark668)撰写了一章，该章节专门针对互连网络中的死锁分辨率。最后，[Jantsch and Tenhunen \ [2003 ]](#_bookmark660)在 OCNS 上为多核算处理器和芯片系统上的系统编辑的工作也很有趣。

### Wide Area Networks

> ###广域网络

Wide area networks are the earliest of the data interconnection networks. The fore- runner of the Internet is the ARPANET, which in 1969 connected computer sci- ence departments across the United States that had research grants funded by the Advanced Research Project Agency (ARPA), a U.S. government agency. It was originally envisioned as using reliable communications at lower levels. Practical experience with failures of the underlying technology led to the failure-tolerant TCP/IP, which is the basis for the Internet today. Vint Cerf and Robert Kahn are credited with developing the TCP/IP protocols in the mid-1970s, winning the ACM Software Award in recognition of that achievement. [Kahn [1972]](#_bookmark661) is an early reference on the ideas of ARPANET. For those interested in learning more about TPC/IP, [Stevens [1994–1996]](#_bookmark677) has written classic books on the topic.

> 广域网络是数据互连网络中最早的网络。互联网的前跑者是 ARPANET，该 ARPANET 于 1969 年与美国政府机构高级研究项目局(ARPA)资助的研究赠款相关的计算机科学部门。它最初设想为在较低级别使用可靠的通信。基础技术失败的实践经验导致了容忍失败的 TCP/IP，这是当今互联网的基础。Vint Cerf 和 Robert Kahn 因在 1970 年代中期开发 TCP/IP 协议而赢得了 ACM 软件奖，以表彰这一成就。[Kahn \ [1972 ]](#_bookmark661)是关于 Arpanet 思想的早期参考。对于有兴趣了解 TPC/IP 的人，[Stevens \ [1994–1996 ]](#_bookmark677)已经写了有关该主题的经典书籍。

In 1975, there were roughly 100 networks in the ARPANET; in 1983, only 200\. In 1995, the Internet encompassed 50,000 networks worldwide, about half of which were in the United States. That number is hard to calculate now, but the number of IP hosts grew by a factor of 15 from 1995 to 2000, reaching 100 million Internet hosts by the end of 2000. It has grown much faster since then. With most service providers assigning dynamic IP addresses, many local area networks using private IP addresses, and with most networks allowing wireless connections, the total number of hosts in the Internet is nearly impossible to compute. In July 2005, the Internet Systems Consortium ([_www.isc.org_](http://www.isc.org/)) estimated more than 350 million Internet hosts, with an annual increase of about 25% projected. Although key government networks made the Internet possible (i.e., ARPANET and NSFNET), these networks have been taken over by the commercial sector, allow- ing the Internet to thrive. But major innovations to the Internet are still likely to come from government-sponsored research projects rather than from the commer- cial sector. The National Science Foundation’s Global Environment for Network Innovation (GENI) initiative is an example of this.

> 1975 年，ARPANET 中大约有 100 个网络； 1983 年，只有 200\。 1995 年，互联网在全球拥有 50,000 个网络，其中大约一半在美国。 这个数字现在很难计算，但 IP 主机的数量从 1995 年到 2000 年增长了 15 倍，到 2000 年底达到 1 亿台 Internet 主机。此后增长速度更快。 由于大多数服务提供商分配动态 IP 地址，许多局域网使用私有 IP 地址，并且大多数网络允许无线连接，因此几乎无法计算 Internet 中的主机总数。 2005 年 7 月，互联网系统联盟 ([_www.isc.org_](http://www.isc.org/)) 估计互联网主机超过 3.5 亿，预计每年增长约 25%。 尽管关键的政府网络使互联网成为可能（即 ARPANET 和 NSFNET），但这些网络已被商业部门接管，从而使互联网蓬勃发展。 但是互联网的主要创新仍然可能来自政府资助的研究项目，而不是来自商业部门。 美国国家科学基金会的全球网络创新环境 (GENI) 倡议就是一个例子。

The most exciting application of the Internet is the World Wide Web, devel- oped in 1989 by Tim Berners-Lee, a programmer at the European Center for Par- ticle Research (CERN), for information access. In 1992, a young programmer at the University of Illinois, Marc Andreessen, developed a graphical interface for the Web called Mosaic. It became immensely popular. He later became a founder of Netscape, which popularized commercial browsers. In May 1995, at the time of the second edition of this book, there were over 30,000 Web pages, and the number was doubling every two months. During the writing of the third edition of this text, there were more than 1.3 billion Web pages. In December 2005, the number of Web servers approached 75 million, having increased by 30% during that same year.

> 互联网最激动人心的应用是欧洲派系研究中心(CERN)的程序员 Tim Berners-Lee 于 1989 年开发的万维网，用于信息访问。1992 年，伊利诺伊大学的一名年轻程序员马克·安德森(Marc Andreessen)为网络开发了一个名为 Mosaic 的图形界面。它变得非常受欢迎。后来，他成为 Netscape 的创始人，该公司普及了商业浏览器。1995 年 5 月，在本书第二版时，有 30,000 多个网页，而且数字每两个月翻了一番。在本文第三版的撰写期间，有超过 13 亿的网页。2005 年 12 月，网络服务器的数量接近 7500 万，同年增长了 30％。

Asynchronous Transfer Mode (ATM) was an attempt to design the definitive communication standard. It provided good support for data transmission as well as digital voice transmission (i.e., phone calls). From a technical point of view, it combined the best from packet switching and circuit switching, also providing excellent support for providing quality of service (QoS). [Alles [1995]](#_bookmark642) offers a good survey on ATM. In 1995, no one doubted that ATM was going to be the future for this community. Ten years later, the high equipment and personnel training costs basically killed ATM, and we returned back to the simplicity of TCP/IP. Another important blow to ATM was its defeat by the Ethernet family in the LAN domain, where packet switching achieved significantly lower latencies than ATM, which required establishing a connection before data transmission. ATM connectionless servers were later introduced in an attempt to fix this problem, but they were expen- sive and represented a central bottleneck in the LAN.

> 异步传输模式 (ATM) 是设计最终通信标准的尝试。 它为数据传输和数字语音传输（即电话）提供了良好的支持。 从技术角度来看，它结合了分组交换和电路交换的优点，也为提供服务质量 (QoS) 提供了出色的支持。 [Alles [1995]](#_bookmark642) 对 ATM 进行了很好的调查。 1995 年，没有人怀疑 ATM 将成为这个社区的未来。 十年后，高昂的设备和人员培训成本基本扼杀了 ATM，我们又回到了 TCP/IP 的单纯。 对 ATM 的另一个重要打击是它在 LAN 域中被以太网家族击败，其中分组交换的延迟明显低于 ATM，后者需要在数据传输之前建立连接。 后来引入了 ATM 无连接服务器以试图解决这个问题，但它们很昂贵并且代表了 LAN 中的中心瓶颈。

Finally, WANs today rely on optical fiber. Fiber technology has made so many advances that today WAN fiber bandwidth is often underutilized. The main reason for this is the commercial introduction of wavelength division multiplexing (WDM), which allows each fiber to transmit many data streams simultaneously over different wavelengths, thus allowing three orders of mag- nitude bandwidth increase in just one generation, that is, 3 to 5 years (a good text by [Senior [1993]](#_bookmark675) discusses optical fiber communications). However, IP routers may still become a bottleneck. At 10- to 40-Gbps link rates, and with thousands of ports in large core IP routers, packets must be processed very quickly—that is, within a few tens of nanoseconds. The most time-consuming operation is routing. The way IP addresses have been defined and assigned to Internet hosts makes routing very complicated, usually requiring a complex search in a tree structure for every packet. Network processors have become popular as a cost-effective solution for implementing routing and other packet-filtering operations. They usually are RISC-like and highly multi- threaded and implement local stores instead of caches.

> 最后，今天的 WAN 依赖于光纤。 光纤技术取得了如此多的进步，以至于如今 WAN 光纤带宽经常未得到充分利用。 其主要原因是波分复用 (WDM) 的商业引入，它允许每根光纤在不同波长上同时传输许多数据流，从而仅在一代中就可以将带宽增加三个数量级，即 3 到 5 年（[Senior [1993]](#_bookmark675) 的一篇好文章讨论了光纤通信）。 然而，IP 路由器仍可能成为瓶颈。 在 10 到 40 Gbps 的链路速率下，大型核心 IP 路由器中有数千个端口，必须非常快速地处理数据包，即在几十纳秒内。 最耗时的操作是路由。 IP 地址的定义和分配给 Internet 主机的方式使得路由非常复杂，通常需要在树结构中对每个数据包进行复杂的搜索。 网络处理器作为实现路由和其他数据包过滤操作的经济高效的解决方案而变得流行起来。 它们通常类似于 RISC 和高度多线程，并实现本地存储而不是缓存。

### Local Area Networks

ARPA’s success with wide area networks led directly to the most popular local area networks. Many researchers at Xerox Palo Alto Research Center had been funded by ARPA while working at universities, so they all knew the value of networking. In 1974, this group invented the Alto, the forerunner of today’s desktop computers [[Thacker et al. 1982](#_bookmark681)], and the Ethernet [[Metcalfe and Boggs 1976](#_bookmark666)], today’s LAN. This group—David Boggs, Butler Lampson, Ed McCreight, Bob Sprowl, and Chuck Thacker—became luminaries in computer science and engineering, collect- ing a treasure chest of awards among them.

> ARPA 在广域网方面的成功直接导致了最流行的局域网。 施乐帕洛阿尔托研究中心的许多研究人员在大学工作期间曾获得 ARPA 的资助，因此他们都知道网络的价值。 1974 年，这个小组发明了 Alto，它是当今台式电脑的先驱 [[Thacker et al. 1982](#_bookmark681)]，以及以太网 [[Metcalfe and Boggs 1976](#_bookmark666)]，今天的局域网。 这群人——David Boggs、Butler Lampson、Ed McCreight、Bob Sprowl 和 Chuck Thacker——成为了计算机科学和工程领域的杰出人物，在他们中间收获了无数奖项。

This first Ethernet provided a 3-Mbit/sec interconnection, which seemed like an unlimited amount of communication bandwidth with computers of that era. It relied on the interconnect technology developed for the cable television industry. Special microcode support gave a round-trip time of 50 μs for the Alto over Ether- net, which is still a respectable latency. It was Boggs’ experience as a ham radio operator that led to a design that did not need a central arbiter, but instead listened before use and then varied back-off times in case of conflicts.

> 第一个以太网提供了 3-mbit/sec 的互连，这似乎是与该时代的计算机的无限量通信带宽。它依靠为有线电视行业开发的互连技术。特殊的微码支持给出了 50μs 的往返时间，使中心网络网络仍然是可观的潜伏期。正是 Boggs 作为 HAM 无线电操作员的经验导致了不需要中央仲裁者的设计，而是在使用前聆听，然后在发生冲突的情况下进行了不同的后退时间。

The announcement by Digital Equipment Corporation, Intel, and Xerox of a standard for 10-Mbit/sec Ethernet was critical to the commercial success of Ethernet. This announcement short-circuited a lengthy IEEE standards effort, which eventually did publish IEEE 802.3 as a standard for Ethernet.

> Digital Equipment Corporation、Intel 和 Xerox 宣布的 10 Mbit/sec 以太网标准对于以太网的商业成功至关重要。 该公告缩短了 IEEE 标准制定工作的漫长时间，最终将 IEEE 802.3 发布为以太网标准。

There have been several unsuccessful candidates that have tried to replace the Ethernet. The Fiber Data Distribution Interconnect (FDDI) committee, unfortu- nately, took a very long time to agree on the standard, and the resulting interfaces were expensive. It was also a shared medium when switches were becoming affordable. ATM also missed the opportunity in part because of the long time to standardize the LAN version of ATM, and in part because of the high latency and poor behavior of ATM connectionless servers, as mentioned above. Infini- Band for the reasons discussed below has also faltered. As a result, Ethernet con- tinues to be the absolute leader in the LAN environment, and it remains a strong opponent in the high-performance computing market as well, competing against the SANs by delivering high bandwidth at low cost. The main drawback of Ether- net for high-end systems is its relatively high latency and lack of support in most interface cards to implement the necessary protocols.

> 有几个尝试取代以太网的候选人未获成功。 遗憾的是，光纤数据分布互连 (FDDI) 委员会花了很长时间才就该标准达成一致，并且由此产生的接口非常昂贵。 当交换机变得负担得起时，它也是一种共享媒体。 ATM 也错失了机会，部分原因是标准化 ATM LAN 版本的时间很长，部分原因是 ATM 无连接服务器的高延迟和不良行为，如上所述。 由于下面讨论的原因，Infini-Band 也步履蹒跚。 结果，以太网继续成为 LAN 环境中的绝对领导者，并且它仍然是高性能计算市场的强大对手，通过以低成本提供高带宽与 SAN 竞争。 用于高端系统的以太网的主要缺点是其相对较高的延迟以及大多数接口卡不支持实现必要的协议。

Because of failures of the past, LAN modernization efforts have been centered on extending Ethernet to lower-cost media such as unshielded twisted pair (UTP), switched interconnects, and higher link speeds as well as to new domains such as wireless communication. Practically all new PC motherboards and laptops imple- ment a Fast/Gigabit Ethernet port (100/1000 Mbps), and most laptops implement a 54 Mbps Wireless Ethernet connection. Also, home wired or wireless LANs con- necting all the home appliances, set-top boxes, desktops, and laptops to a shared Internet connection are very common. [Spurgeon [2006]](#_bookmark676) has provided a nice online summary of Ethernet technology, including some of its history.

> 由于过去的失败，LAN 现代化努力一直集中在将以太网扩展到成本更低的介质（例如非屏蔽双绞线 (UTP)、交换互连）和更高的链路速度以及无线通信等新领域。 实际上，所有新的 PC 主板和笔记本电脑都采用快速/千兆以太网端口 (100/1000 Mbps)，并且大多数笔记本电脑采用 54 Mbps 无线以太网连接。 此外，将所有家用电器、机顶盒、台式机和笔记本电脑连接到共享互联网连接的家庭有线或无线局域网非常普遍。 [Spurgeon [2006]](#_bookmark676) 提供了一个很好的以太网技术在线摘要，包括它的一些历史。

### System Area Networks

One of the first nonblocking multistage interconnection networks was proposed by [Clos [1953]](#_bookmark646) for use in telephone exchange offices. Building on this, many early inventions for system area networks came from their use in massively parallel pro- cessors (MPPs). One of the first MPPs was the Illiac IV, a SIMD array built in the early 1970s with 64 processing elements ( "massive" at that time) interconnected using a topology based on a 2D torus that provided neighbor-to-neighbor commu- nication. Another representative of early MPP was the Cosmic Cube, which used Ethernet interface chips to connect 64 processors in a 6-cube. Communication between nonneighboring nodes was made possible by store-and-forwarding of packets at intermediate nodes toward their final destination. A much larger and truly "massive" MPP built in the mid-1980s was the Connection Machine, a SIMD multiprocessor consisting of 64 K 1-bit processing elements, which also used a hypercube with store-and-forwarding. Since these early MPP machines, intercon- nection networks have improved considerably.

> [Clos [1953]](#_bookmark646) 提出了第一个非阻塞多级互连网络，用于电话交换局。 在此基础上，系统区域网络的许多早期发明都源于它们在大规模并行处理器 (MPP) 中的使用。 最早的 MPP 之一是 Illiac IV，它是一个 SIMD 阵列，建于 1970 年代初期，具有 64 个处理元件（当时是“大量”），使用基于提供相邻通信的 2D 环面的拓扑互连。 早期 MPP 的另一个代表是 Cosmic Cube，它使用以太网接口芯片将 64 个处理器连接在一个 6-cube 中。 通过在中间节点向最终目的地存储和转发数据包，非相邻节点之间的通信成为可能。 80 年代中期建造的一个更大且真正“大规模”的 MPP 是 Connection Machine，这是一个由 64 K 1 位处理元素组成的 SIMD 多处理器，它还使用具有存储和转发功能的超立方体。 自从这些早期的 MPP 机器以来，互连网络得到了相当大的改进。

In the 1970s through the 1990s, considerable research went into trying to opti- mize the topology and, later, the routing algorithm, switching, arbitration, and flow control techniques. Initially, research focused on maximizing performance with little attention paid to implementation constraints or crosscutting issues. Many exotic topologies were proposed having very interesting properties, but most of them complicated the routing. Rising from the fray was the hypercube, a very pop- ular network in the 1980s that has all but disappeared from MPPs since the 1990s. What contributed to this shift was a performance model by [Dally [1990]](#_bookmark647) that showed that if the implementation is wire limited, lower-dimensional topologies achieve better performance than higher-dimensional ones because of their wider links for a given wire budget. Many designers followed that trend assuming their designs to be wire limited, even though most implementations were (and still are) pin limited. Several supercomputers since the 1990s have implemented low- dimensional topologies, including the Intel Paragon, Cray T3D, Cray T3E, HP AlphaServer, Intel ASCI Red, and IBM Blue Gene/L.

> 从 1970 年代到 1990 年代，大量的研究开始尝试优化拓扑结构，以及后来的路由算法、交换、仲裁和流量控制技术。 最初，研究侧重于最大化性能，很少关注实施约束或横切问题。 许多具有非常有趣特性的奇异拓扑被提出，但其中大多数使路由复杂化。 从竞争中崛起的是超立方体，它是 1980 年代非常流行的网络，但自 1990 年代以来几乎从 MPP 中消失了。 促成这种转变的是 [Dally [1990]](#_bookmark647) 的性能模型，该模型表明，如果实施受线限制，则低维拓扑比高维拓扑具有更好的性能，因为它们对于给定的链接更宽 电汇预算。 许多设计人员遵循这一趋势，假设他们的设计是线限制的，即使大多数实现是（并且仍然是）管脚限制。 自 1990 年代以来，几台超级计算机已经实现了低维拓扑，包括 Intel Paragon、Cray T3D、Cray T3E、HP AlphaServer、Intel ASCI Red 和 IBM Blue Gene/L。

Meanwhile, other designers followed a very different approach, implementing bidirectional MINs in order to reduce the number of required switches below the number of network nodes. The most popular bidirectional MIN was the fat tree topology, originally proposed by [Leiserson [1985]](#_bookmark664) and first used in the Connection Machine CM-5 supercomputer and, later, the IBM ASCI White and ASC Purple supercomputers. This indirect topology was also used in several European parallel computers based on the Transputer. The Quadrics network has inherited character- istics from some of those Transputer-based networks. Myrinet has also evolved significantly from its first version, with Myrinet 2000 incorporating the fat tree as its principal topology. Indeed, most current implementations of SANs, including Myrinet, InfiniBand, and Quadrics as well as future implementations such as PCI- Express Advanced Switching, are based on fat trees.

> 与此同时，其他设计人员采用了一种非常不同的方法，实施双向 MIN，以将所需交换机的数量减少到网络节点数量以下。 最流行的双向 MIN 是胖树拓扑，最初由 [Leiserson [1985]](#_bookmark664) 提出，首先用于 Connection Machine CM-5 超级计算机，后来用于 IBM ASCI White 和 ASC Purple 超级计算机。 这种间接拓扑也被用于几个基于 Transputer 的欧洲并行计算机。 Quadrics 网络继承了一些基于 Transputer 的网络的特征。 Myrinet 也从其第一个版本有了显着的发展，Myrinet 2000 将胖树作为其主要拓扑结构。 实际上，大多数 SAN 的当前实现（包括 Myrinet、InfiniBand 和 Quadrics）以及未来的实现（如 PCI-Express Advanced Switching）都是基于胖树的。

Although the topology is the most visible aspect of a network, other features also have a significant impact on performance. A seminal work that raised aware- ness of deadlock properties in computer systems was published by [Holt [1972]](#_bookmark658). Early techniques for avoiding deadlock in store-and-forward networks were pro- posed by [Merlin and Schweitzer [1980]](#_bookmark665) and by [Gunther [1981]](#_bookmark656). Pipelined switch- ing techniques were first introduced by [Kermani and Kleinrock [1979]](#_bookmark662) (virtual cut- through) and improved upon by [Dally and Seitz [1986]](#_bookmark650) (wormhole), which signif- icantly reduced low-load latency and the topology’s impact on message latency over previously proposed techniques. Wormhole switching was initially better than virtual cut-through largely because flow control could be implemented at a granularity smaller than a packet, allowing high-bandwidth links that were not as constrained by available switch memory bandwidth. Today, virtual cut-through is usually preferred over wormhole because it achieves higher throughput due to less HOL blocking effects and is enabled by current integration technology that allows the implementation of many packet buffers per link.

> 尽管拓扑结构是网络最明显的方面，但其他功能也对性能有重大影响。 [Holt [1972]](#_bookmark658) 发表了一项开创性的工作，提高了人们对计算机系统中死锁属性的认识。 [Merlin 和 Schweitzer [1980]](#_bookmark665) 和 [Gunther [1981]](#_bookmark656) 提出了避免存储转发网络死锁的早期技术。 流水线交换技术首先由 [Kermani 和 Kleinrock [1979]](#_bookmark662)（虚拟直通）引入，并由 [Dally 和 Seitz [1986]](#_bookmark650)（虫洞）改进，这意味着 与先前提出的技术相比，显着减少了低负载延迟和拓扑对消息延迟的影响。 虫洞交换最初优于虚拟直通，主要是因为流量控制可以在比数据包更小的粒度上实施，从而允许不受可用交换机内存带宽限制的高带宽链路。 如今，虚拟直通通常比虫洞更受欢迎，因为它由于 HOL 阻塞效应较少而实现了更高的吞吐量，并且由允许在每个链路上实施许多数据包缓冲区的当前集成技术实现。

[Tamir and Frazier [1992]](#_bookmark679) laid the groundwork for virtual output queuing with the notion of dynamically allocated multiqueues. Around this same time, [Dally](#_bookmark648) [[1992]](#_bookmark648) contributed the concept of virtual channels, which was key to the develop- ment of more efficient deadlock-free routing algorithms and congestion-reducing flow control techniques for improved network throughput. Another highly relevant contribution to routing was a new theory proposed by [Duato [1993]](#_bookmark653) that allowed the implementation of fully adaptive routing with just one "escape" virtual channel to avoid deadlock. Previous to this, the required number of virtual channels to avoid deadlock increased exponentially with the number of network dimensions. [Pinkston and Warnakulasuriya [1997]](#_bookmark670) went on to show that deadlock actually can occur very infrequently, giving credence to deadlock recovery routing approaches. [Scott and Goodman [1994]](#_bookmark674) were among the first to analyze the usefulness of pipe- lined channels for making link bandwidth independent of the time of flight. These and many other innovations have become quite popular, finding use in most high- performance interconnection networks, both past and present. The IBM Blue Gene/L, for example, implements virtual cut-through switching, four virtual chan- nels per link, fully adaptive routing with one escape channel, and pipelined links. MPPs represent a very small (and currently shrinking) fraction of the informa- tion technology market, giving way to bladed servers and clusters. In the United States, government programs such as the Advanced Simulation and Computing (ASC) program (formerly known as the Accelerated Strategic Computing Initia- tive, or ASCI) have promoted the design of those machines, resulting in a series of increasingly powerful one-of-a-kind MPPs costing $50 million to $100 million. These days, many are basically lower-cost clusters of symmetric multiprocessors (SMPs) (see [Pfister [1998]](#_bookmark667) and [Sterling [2001]](#_bookmark678) for two perspectives on clustering). In fact, in 2005, nearly 75% of the TOP500 supercomputers were clusters. Nev- ertheless, the design of each generation of MPPs and even clusters pushes inter- connection network research forward to confront new problems arising due to shear size and other scaling factors. For instance, source-based routing—the sim- plest form of routing—does not scale well to large systems. Likewise, fat trees require increasingly longer links as the network size increases, which led IBM Blue Gene/L designers to adopt a 3D torus network with distributed routing that can be implemented with bounded-length links.

> [Tamir 和 Frazier [1992]](#_bookmark679) 使用动态分配多队列的概念为虚拟输出队列奠定了基础。 大约在同一时间，[Dally](#_bookmark648) [[1992]](#_bookmark648) 提出了虚拟通道的概念，这是开发更高效的无死锁路由算法和减少拥塞流量的关键 提高网络吞吐量的控制技术。 对路由的另一个高度相关的贡献是由 [Duato [1993]](#_bookmark653) 提出的一种新理论，该理论允许仅使用一个“转义”虚拟通道来实现完全自适应路由以避免死锁。 在此之前，避免死锁所需的虚拟通道数量随着网络维度的数量呈指数增长。 [Pinkston 和 Warnakulasuriya [1997]](#_bookmark670) 继续表明死锁实际上很少会发生，从而证明了死锁恢复路由方法。 [Scott 和 Goodman [1994]](#_bookmark674) 是最先分析流水线信道使链路带宽独立于飞行时间的有用性的人之一。 这些和许多其他创新已经变得非常流行，在过去和现在的大多数高性能互连网络中都有使用。 例如，IBM Blue Gene/L 实现了虚拟直通交换、每条链路四个虚拟通道、带一个逃生通道的完全自适应路由以及流水线链路。 MPP 只占信息技术市场的一小部分（目前正在缩小），让位给刀片服务器和集群。 在美国，高级模拟与计算 (ASC) 计划（以前称为加速战略计算计划或 ASCI）等政府计划促进了这些机器的设计，从而产生了一系列越来越强大的单 同类 MPP 耗资 5000 万至 1 亿美元。 如今，许多基本上是对称多处理器 (SMP) 的低成本集群（有关集群的两个观点，请参见 [Pfister [1998]](#_bookmark667) 和 [Sterling [2001]](#_bookmark678)）。 事实上，在 2005 年，将近 75% 的 TOP500 超级计算机都是集群。 然而，每一代 MPP 甚至集群的设计都推动互连网络研究向前发展，以应对由于剪切尺寸和其他缩放因素引起的新问题。 例如，基于源的路由——最简单的路由形式——不能很好地扩展到大型系统。 同样，随着网络规模的增加，胖树需要越来越长的链接，这导致 IBM Blue Gene/L 设计人员采用具有分布式路由的 3D 环面网络，可以使用有限长度的链接来实现。

### Storage Area Networks

System area networks were originally designed for a single room or single floor (thus their distances are tens to hundreds of meters) and were for use in MPPs and clusters. In the intervening years, the acronym SAN has been co-opted to also mean storage area networks, whereby networking technology is used to connect storage devices to compute servers. Today, many refer to "storage" when they say SAN. The most widely used SAN example in 2006 was Fibre Channel (FC), which comes in many varieties, including various versions of Fibre Channel Arbitrated Loop (FC-AL) and Fibre Channel Switched (FC-SW). Not only are disk arrays attached to servers via FC links, but there are even some disks with FC links attached to switches so that storage area networks can enjoy the benefits of greater bandwidth and interconnectivity of switching.

> 系统区域网络最初是为单室或单层设计的(因此它们的距离是数十万至百米)，用于 MPP 和集群。在随后的几年中，首字母缩写 SAN 已被选为平均存储区域网络，从而将网络技术用于连接存储设备以计算服务器。今天，许多人在说 san 时指的是 "存储" 。2006 年使用最广泛的 SAN 示例是纤维通道(FC)，它有许多品种，包括各种版本的光纤通道仲裁环(FC-AL)和光纤通道切换(FC-SW)。不仅通过 FC 链接连接到服务器上的磁盘阵列，而且甚至还有一些带有 FC 链接的磁盘，因此存储区域网络可以享受更大的带宽和交换机互连的好处。

In October 2000, the InfiniBand Trade Association announced the version 1.0 specification of InfiniBand [[InfiniBand Trade Association 2001](#_bookmark659)]. Led by Intel, HP, IBM, Sun, and other companies, it was targeted to the high-performance computing market as a successor to the PCI bus by having point-to-point links and switches with its own set of protocols. Its characteristics are desirable potentially both for system area networks to connect clusters and for storage area networks to connect disk arrays to servers. Consequently, it has had strong competition from both fronts. On the storage area networking side, the chief competition for Infini- Band has been the rapidly improving Ethernet technology widely used in LANs. The Internet Engineering Task Force proposed a standard called iSCSI to send SCSI commands over IP networks [[Satran et al. 2001](#_bookmark673)]. Given the cost advantages of the higher-volume Ethernet switches and interface cards, Gigabit Ethernet dom- inates the low-end and medium range for this market. What’s more, the slow intro- duction of InfiniBand and its small market share delayed the development of chip sets incorporating native support for InfiniBand. Therefore, network interface cards had to be plugged into the PCI or PCI-X bus, thus never delivering on the promise of replacing the PCI bus.

> 2000 年 10 月，InfiniBand 贸易协会公布了 InfiniBand 的 1.0 版规范 [[InfiniBand 贸易协会 2001](#_bookmark659)]。 在英特尔、惠普、IBM、Sun 和其他公司的带领下，它通过拥有点对点链路和带有自己的协议集的交换机，作为 PCI 总线的继任者，瞄准了高性能计算市场。 它的特性对于连接集群的系统区域网络和连接磁盘阵列到服务器的存储区域网络来说都是潜在的。 因此，它在两个方面都面临着激烈的竞争。 在存储区域网络方面，Infini-Band 的主要竞争一直是在 LAN 中广泛使用的快速改进的以太网技术。 Internet 工程任务组提出了一个称为 iSCSI 的标准，用于通过 IP 网络发送 SCSI 命令 [[Satran 等人。 2001](#_bookmark673)]。 鉴于大批量以太网交换机和接口卡的成本优势，千兆以太网在该市场的低端和中端市场占据主导地位。 此外，InfiniBand 的缓慢推出及其较小的市场份额推迟了包含对 InfiniBand 的本地支持的芯片组的开发。 因此，网络接口卡必须插入 PCI 或 PCI-X 总线，从而无法兑现取代 PCI 总线的承诺。

It was another I/O standard, PCI-Express, that finally replaced the PCI bus. Like InfiniBand, PCI-Express implements a switched network but with point- to-point serial links. To its credit, it maintains software compatibility with the PCI bus, drastically simplifying migration to the new I/O interface. Moreover, PCI-Express benefited significantly from mass market production and has found application in the desktop market for connecting one or more high-end graphics cards, making gamers very happy. Every PC motherboard now implements one or more 16x PCI-Express interfaces. PCI-Express absolutely dominates the I/O interface, but the current standard does not provide support for interprocessor communication.

> 这是另一个 I/O 标准 PCI-Express，最终取代了 PCI 总线。像 Infiniband 一样，PCI-Express 实现了开关网络，但具有点要点串行链接。值得赞扬的是，它保持了与 PCI 总线的软件兼容性，从而大大简化了迁移到新的 I/O 接口。此外，PCI-Express 从大众市场生产中受益匪浅，并在台式机市场中发现了连接一张或多张高端图形卡的应用，使游戏玩家非常高兴。现在，每个 PC 主板都实现一个或多个 16 倍 PC-Express 接口。PC-Express 绝对主导 I/O 接口，但是当前的标准并未提供对处理器通信的支持。

Yet another standard, Advanced Switching Interconnect (ASI), may emerge as a complementary technology to PCI-Express. ASI is compatible with PCI-Express, thus linking directly to current motherboards, but it also implements support for interprocessor communication as well as I/O. Its defenders believe that it will even- tually replace both SANs and LANs with a unified network in the data center mar- ket, but ironically this was also said of InfiniBand. The interested reader is referred to [Pinkston et al. [2003]](#_bookmark671) for a detailed discussion on this. There is also a new disk interface standard called Serial Advanced Technology Attachment (SATA) that is replacing parallel Integrated Device Electronics (IDE) with serial signaling tech- nology to allow for increased bandwidth. Most disks in the market use this new interface, but keep in mind that Fibre Channel is still alive and well. Indeed, most of the promises made by InfiniBand in the SAN market were satisfied by Fibre Channel first, thus increasing their share of the market.

> 另一个标准，高级交换互连 (ASI)，可能会作为 PCI-Express 的补充技术出现。 ASI 与 PCI-Express 兼容，因此直接连接到当前的主板，但它也实现了对处理器间通信和 I/O 的支持。 它的捍卫者认为，它最终将在数据中心市场用统一网络取代 SAN 和 LAN，但具有讽刺意味的是，InfiniBand 也有人这么说。 有兴趣的读者可以参考 [Pinkston et al. [2003]](#_bookmark671) 对此进行了详细讨论。 还有一种称为串行高级技术附件 (SATA) 的新磁盘接口标准，它正在用串行信号技术取代并行集成设备电子设备 (IDE)，以增加带宽。 市场上的大多数磁盘都使用这种新接口，但请记住，光纤通道仍然存在且运行良好。 事实上，InfiniBand 在 SAN 市场所做的大部分承诺首先由光纤通道满足，从而增加了他们的市场份额。

Some believe that Ethernet, PCI-Express, and SATA have the edge in the LAN, I/O interface, and disk interface areas, respectively. But the fate of the remaining storage area networking contenders depends on many factors. A won- derful characteristic of computer architecture is that such issues will not remain endless academic debates, unresolved as people rehash the same arguments repeat- edly. Instead, the battle is fought in the marketplace, with well-funded and talented groups giving their best efforts at shaping the future. Moreover, constant changes to technology reward those who are either astute or lucky. The best combination of technology and follow-through has often determined commercial success. Time will tell us who will win and who will lose, at least for the next round!

> 有人认为，以太网、PCI-Express 和 SATA 分别在 LAN、I/O 接口和磁盘接口领域具有优势。 但其余存储区域网络竞争者的命运取决于许多因素。 计算机体系结构的一个奇妙特性是，此类问题不会一直是无休止的学术辩论，不会因为人们反复讨论相同的论点而得不到解决。 相反，这场战斗是在市场上进行的，资金雄厚、才华横溢的团队尽最大努力塑造未来。 此外，技术的不断变化会奖励那些精明或幸运的人。 技术与跟进的最佳结合往往决定了商业上的成功。 时间会告诉我们谁赢谁输，至少下一轮是这样！

### On-Chip Networks

Relative to the other network domains, on-chip networks are in their infancy. As recently as the late 1990s, the traditional way of interconnecting devices such as caches, register files, ALUs, and other functional units within a chip was to use dedicated links aimed at minimizing latency or shared buses aimed at simplicity. But with subsequent increases in the volume of interconnected devices on a single chip, the length and delay of wires to cross a chip, and chip power consumption, it has become important to share on-chip interconnect bandwidth in a more struc- tured way, giving rise to the notion of a network on-chip. Among the first to rec- ognize this were Agarwal [[Waingold et al. 1997](#_bookmark683)] and Dally [[Dally 1999; Dally and](#_bookmark649) [Towles 2001](#_bookmark649)]. They and others argued that on-chip networks that route packets allow efficient sharing of burgeoning wire resources between many communica- tion flows and also facilitate modularity to mitigate chip-crossing wire delay prob- lems identified by [Ho, Mai, and Horowitz [2001]](#_bookmark657). Switched on-chip networks were also viewed as providing better fault isolation and tolerance. Challenges in designing these networks were later described by [Taylor et al. [2005]](#_bookmark680), who also proposed a 5-tuple model for characterizing the delay of OCNs. A design process for OCNs that provides a complete synthesis flow was proposed by [Bertozzi et al.](#_bookmark644) [[2005]](#_bookmark644). Following these early works, much research and development has gone into on-chip network design, making this a very hot area of microarchitecture activity.

> 相对于其他网络领域，片上网络还处于起步阶段。 就在 20 世纪 90 年代后期，芯片内高速缓存、寄存器文件、ALU 和其他功能单元等设备的传统互连方式是使用旨在最小化延迟的专用链路或旨在简化的共享总线。 但随着单个芯片上互连器件体积的增加、穿过芯片的导线的长度和延迟以及芯片功耗的增加，以更结构化的方式共享片上互连带宽变得很重要， 产生了片上网络的概念。 最早认识到这一点的是 Agarwal [[Waingold 等人。  1997](#_bookmark683)] 和 Dally [[Dally 1999;  Dally and](#_bookmark649) [Towles 2001](#_bookmark649)]。 他们和其他人认为，路由数据包的片上网络允许在许多通信流之间有效共享新兴的线路资源，并且还促进模块化以减轻 [Ho、Mai 和 Horowitz [2001] 确定的芯片交叉线路延迟问题]](#\_bookmark657)。 片上交换网络也被视为提供更好的故障隔离和容错能力。 [Taylor 等人后来描述了设计这些网络的挑战。 [2005]](#_bookmark680)，他还提出了一个 5 元组模型来表征 OCN 的延迟。 [Bertozzi 等人](#_bookmark644) [[2005]](#_bookmark644) 提出了提供完整合成流程的 OCN 设计流程。 在这些早期工作之后，许多研究和开发都进入了片上网络设计，使其成为微体系结构活动的一个非常热门的领域。

Multicore and tiled designs featuring on-chip networks have become very pop- ular since the turn of the millennium. [Pinkston and Shin [2005]](#_bookmark669) provide a survey of on-chip networks used in early multicore/tiled systems. Most designs exploit the reduced wiring complexity of switched OCNs as the paths between cores/tiles can be precisely defined and optimized early in the design process, thus enabling improved power and performance characteristics. With typically tens of thousands of wires attached to the four edges of a core or tile as "pinouts," wire resources can be traded off for improved network performance by having very wide channels over which data can be sent broadside (and possibly scaled up or down according to the power management technique), as opposed to serializing the data over fixed narrow channels.

> 自千年之交以来，具有片上网络的多功能和瓷砖设计已经变得非常流行。[Pinkston and Shin \ [2005 ]](#_bookmark669)提供了对早期多核/瓷砖系统中使用的片上网络的调查。大多数设计都利用开关 OCN 的接线复杂性降低，因为可以在设计过程的早期进行精确定义和优化核心/瓷砖之间的路径，从而提高了功率和性能特性。通常，核心或瓷砖的四个边缘附有数以万计的电线作为 "引脚" ，可以通过拥有非常广泛的渠道来交换电线资源以改善网络性能，从而可以将数据发送到广泛的方面(并且可能扩大或扩展，也可以扩展。根据电源管理技术)，而不是通过固定狭窄的频道序列化数据。

Rings, meshes, and crossbars are straightforward to implement in planar chip technology and routing is easily defined on them, so these were popular topolog- ical choices in early switched OCNs. It will be interesting to see if this trend con- tinues in the future when several tens to hundreds of heterogeneous cores and tiles will likely be interconnected within a single chip, possibly using 3D integration technology. Considering that processor microarchitecture has evolved signifi- cantly from its early beginnings in response to application demands and technolog- ical advancements, we would expect to see vast architectural improvements to on- chip networks as well.

> 环形、网格和交叉开关可以直接在平面芯片技术中实现，并且可以很容易地在它们上定义路由，因此这些是早期交换 OCN 中流行的拓扑选择。 有趣的是，当几十到数百个异构内核和块可能会在单个芯片内互连时，可能会使用 3D 集成技术，看看这种趋势在未来是否会持续下去。 考虑到处理器微体系结构从一开始就为响应应用程序需求和技术进步而发生了重大变化，我们希望看到片上网络的体系结构也有巨大的改进。
